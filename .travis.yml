language: cpp
compiler:
  - gcc
before_script:
  - sudo apt-get install subversion libboost-all-dev libevent-dev automake libtool flex bison pkg-config g++ libssl-dev
  - cd dep/boost/
  - sh install.sh
  - cd ..
  - cd ..
  - cd dep/thrift-0.3.0/
  - ./configure --with-py=no --with-ruby=no --with-perl=no --with-java=no --prefix=/home/travis/builds/zhangce/thrift
  - make
  - make install
  - cd ..
  - cd ..
  - cmake -DThrift_INCLUDE_DIR=/home/travis/builds/zhangce/thrift/include -DThrift_LIB=/home/travis/builds/zhangce/thrift/lib .
script: make
after_script:
  - export LD_LIBRARY_PATH=/home/travis/builds/zhangce/thrift/lib
  - ./bin/elementary --config=examples/elly/config_test_lda.cfg  
  - python examples/elly/LDA/view.py examples/elly/RS/lda-sample.txt examples/elly/LDA/int_word.tsv  
branches:
  only:
    - master
notifications:
  recipients:
    - czhang@cs.wisc.edu
  email:
    on_success: change
    on_failure: always
rvm:
  - 1.9.3
